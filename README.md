# DEPHEM
Простая C++ библиотека для работы с эфемеридами JPL NASA.  

## Возможности
* Определение положения (и скорости) планет Солнечной Системы, Луны и Солнца.
* Определение значений дополнительных элементов выпусков эфемерид.
* Доступ к общей информации выпуска эфемерид и хранящимся константам. 

Библиотека работает с эфемеридами только **бинарного формата**.

## Загрузить бинарный файл эфемерид
Загрузить требуемый выпуск эфемерид можно с официального ftp-ресурса NASA JPL SSD:  
<ftp://ssd.jpl.nasa.gov/pub/eph/planets/Linux/>.

По ссылке будут доступны несколько каталогов с названиями, соответствующими выпуску эфемерид. В каждом каталоге хранятся несколько файлов, одним из которых является бинарный файл эфемерид. Его название начинается с "_lnx_", а расширение является номерной частью индекса выпуска.  

Например, выпуску DE-эфемерид DE431 соответствует каталог "_de431_". Бинарный файл данного выпуска имеет название "_lnxm13000p17000.431_". Загрузите его (или любой другой файл эфемерид другого выпуска) для последующей работы библиотеки с ним.

## Быстрый старт
````c++
#include <iostream>
#include "dephem/EphemerisRelease.h"
    
int main()
{
    dph::EphemerisRelease de431("lnxm13000p17000.431");

    // Проверка на корректное чтение бинарного файла эфемерид:
    if(de431.isReady())
    {
        std::cout << "Ephemeris object is ready to work" << std::endl;

        // 1 января 2000 года 00:00:00.000 :
        double JED = 2451544.5;

        // Массив для записи результата вычислений:
        double resultArray[3]{};

        // Вычислить радиус-вектор Луны относительно Земли на момент времени JED и записать
        // результат в массив resultArray:
        de431.calculateBody(dph::Calculate::POSITION, dph::Body::MOON, dph::Body::EARTH, JED, resultArray);

        std::cout << "Moon position relative to Earth:" << std::endl;
        std::cout << "x =\t" << resultArray[0]  << "\t[km]" << std::endl;
        std::cout << "y =\t" << resultArray[1]  << "\t[km]" << std::endl;
        std::cout << "z =\t" << resultArray[2]  << "\t[km]" << std::endl;

        // Получить значение астрономической единицы, хранящейся в выпуске DE431:
        const double AU = de431.constant("AU");

        std::cout << "AU =\t" << AU << "\t[km]" << std::endl;    
    }
    else
    {
        std::cout << "Ephemeris file reading error" << std::endl;
    }

    return 0;
}
````

## Дальнейшая разработка
С течением времени функционал библиотеки будет расширяться и совершенствоваться.  

**Задачи:**
* Генерация бинарных файлов из эфемерид текстового (ASCII) формата.
* "Обрезка" бинарных файлов для уменьшения их веса и хранения только требуемой информации.
* Работа с testpo-файлами (специальные файлы, идущие вместе с каждым выпуском для сверки результатов вычислений).
* Ускорение работы с бинарными файлами (чтение и вычисления).

## Документация
Пользовательскую документацию можно получить по [ссылке](./docs/index.md).

## Контакты
Филиппов Максим (разработчик):  
<vetrume@gmail.com>