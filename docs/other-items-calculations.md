# Дополнительные элементы выпуска
Помимо небесных тел, список которых приведён в разделе "[Положения небесных тел](celestial-bodies-calculations.md)", DE-эфемериды могут включать в себя дополнительные элементы. В зависимости от выпуска количество данных элементов может меняться.

Значения дополнительных элементов в **DEPHEM** определяются при помощи метода `calculateOther` класса `dph::EphemerisRelease` (заголовочный файл *EphemerisRelease.h*).

**Содержание раздела:**
* Особенности использования `calculateOther`
    * Доступные элементы
    * Результат вычислений
    * Единицы измерения
    * Формат времени
* Описание `calculateOther`
    * Сигнатура метода
    * Передаваемые параметры
    * Особенности работы
* Примеры использования `calculateOther`

## Особенности использования `calculateOther`

### Доступные элементы
* Земные нутации в долготе и наклонении (модель IAU 1980)
* Либрации мантии Луны
* Угловые скорости мантии Луны
* TT-TDB (в геоцентре)

Для доступа к индексам дополнительныех элементов обратитесь к классу `dph::Other` (модуль EphemerisRelease).

### Результат вычислений
Помимо основных значений, DEPHEM предоставляет возможность вычислить значения состояния элемента (основные значения компонент + их первые производные).

Для доступа к индексам поддерживаемых результатов рассчёта обратитесь к классу `dph::Calculate` (модуль EphemerisRelease).

### Единицы измерения
Основные значения (`dph::Calculate::POSITION`):
| Элемент | Количество компонент | Единицы измерения |
| :-: |:-: |:-: | 
|Земные нутации ...|2| рад.
|Либрации мантии Луны|3| рад.
|Угловые скорости мантии Луны|3| рад./сут.
|TT-TDB (в геоцентре)|1| сек.

Основные значения + их первые производные (`dph::Calculate::STATE`):
| Элемент | Количество компонент | Единицы измерения |
| :-: |:-: |:-: | 
|Земные нутации ...|4| рад., рад./сек
|Либрации мантии Луны|6| рад., рад./сек
|Угловые скорости мантии Луны|6| рад./сут., рад./сек
|TT-TDB (в геоцентре)|2| сек., 1

### Формат времени
**Внимание!** Для вычислений используется эфемеридное время в формате Юлианской Даты (JED - Julian Ephemeris Date).

Более подробно:
* [Юлианская дата, Википедия](https://ru.wikipedia.org/wiki/Юлианская_дата)
* [Эфемеридное время, Википедия](https://ru.wikipedia.org/wiki/Эфемеридное_время)

## Описание `calculateOther`

### Сигнатура метода
````c++
void dph::EphemerisRelease::calculateOther(unsigned calculationResult, 
unsigned otherItem, double JED, double* resultArray) const
````

### Передаваемые параметры

>calculationResult

Индекс результата вычислений. В зависимости от значения параметра меняется результат вычислений. Вместо числовых значений используйте значения, хранимые в классе `dph::Calculate`.

При передаче значения не предусмотренного в `dph::Calculate` метод завершит работу.

>otherItem

Индекс элемента, значения которого требуется получить. Вместо числовых значений используйте значения, хранимые в классе `dph::Other`.

При передаче значения не предусмотренного в `dph::Other` метод завершит работу.

>JED

Момент времени на который требуется определеить значения для искомого тела `targetBody`.

Момент времени `JED` должен принадлежать промежутку [`startDate` : `endDate`] (см. "[Примеры использования](usage-examples.md)"). В противном случае метод завершит работу.

>resultArray

Указатель на массив типа `double`, в который будет записан результат вычислений.

Убедитесь, что передаёте массив достаточного размера для выбранных параметров.  
При передаче нулевого указателя метод завершит работу.

### Особенности работы метода
Если объект не готов к работе (используй `isReady`, см. "[Примеры использования](usage-examples.md)"), то метод завершит работу.

## Примеры использования `calculateOther`

**Пример #1**
Получить значение земных нутаций на момент времени 2451544.5:
````c++
dph::EphemerisRelease de431("lnxm13000p17000.431");

if(de431.isReady())
{
    double JED = 2451544.5;
    
    if(JED >= de431.startDate() && JED <= de431.endDate())
    {
        double resultArray[2]{};

        de431.calculateOther(dph::Calculate::POSITION, dph::Other::EARTH_NUTATIONS,
        JED, resultArray);
    }
}
````

**Пример #2**
Получить значение лунных либраций и их производных на момент времени 2451544.5:
````c++
dph::EphemerisRelease de431("lnxm13000p17000.431");

if(de431.isReady())
{
    double JED = 2451544.5;
    
    if(JED >= de431.startDate() && JED <= de431.endDate())
    {
        double resultArray[6]{};

        de431.calculateOther(dph::Calculate::STATE, dph::Other::LUNAR_MANTLE_LIBRATION,
        JED, resultArray);
    }
}
````

---
[Вернуться к оглавлению](index.md)