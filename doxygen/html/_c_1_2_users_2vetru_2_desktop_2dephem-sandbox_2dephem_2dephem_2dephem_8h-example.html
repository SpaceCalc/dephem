<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>dephem: C:/Users/vetru/Desktop/dephem-sandbox/dephem/dephem/dephem.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">dephem<span id="projectnumber">&#160;1.1</span>
   </div>
   <div id="projectbrief">Библиотека для работы с DE-эфемеридами</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">C:/Users/vetru/Desktop/dephem-sandbox/dephem/dephem/dephem.h</div></div>
</div><!--header-->
<div class="contents">
<p >Положение небесного тела.</p>
<p >Положение небесного тела.Положение <code>pos</code> (x, y, z, км) тела <code>target</code> относительно тела <code>center</code> на момент времени <code>jed</code>.</p>
<p ><code>jed</code> должен удовлетворять интервалу [beginJed(), endJed()].</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code>, при успешном выполнении, иначе - <code>false</code>:<ul>
<li>объект класса не инициализирован файлом эфемерид;</li>
<li>передан неверный индекс центрального или небесного тела;</li>
<li>передано неверное время <code>jed</code>.</li>
</ul>
</dd></dl>
<p>int main() { return 0; }</p>
<dl class="section warning"><dt>Warning</dt><dd><ol type="1">
<li>метод не является потокобезопасным;</li>
<li>указатель <code>pos</code> не проверяется на <code>nullptr</code>.</li>
</ol>
</dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef DEPHEM_H</span></div>
<div class="line"><span class="preprocessor">#define DEPHEM_H</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><span class="preprocessor">#define _CRT_SECURE_NO_WARNINGS</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>dph {</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Индексы тел.</span></div>
<div class="line"><span class="keyword">enum</span> Body</div>
<div class="line">{</div>
<div class="line">    B_MERCURY = 1,</div>
<div class="line">    B_VENUS   = 2,</div>
<div class="line">    B_EARTH   = 3,</div>
<div class="line">    B_MARS    = 4,</div>
<div class="line">    B_JUPITER = 5,</div>
<div class="line">    B_SATURN  = 6,</div>
<div class="line">    B_URANUS  = 7,</div>
<div class="line">    B_NEPTUNE = 8,</div>
<div class="line">    B_PLUTO   = 9,</div>
<div class="line">    B_MOON    = 10,</div>
<div class="line">    B_SUN     = 11,</div>
<div class="line">    B_SSBARY  = 12, <span class="comment">// Барицентр Солнечной Системы.</span></div>
<div class="line">    B_EMBARY  = 13  <span class="comment">// Барицентр системы Земля-Луна.</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Индексы элементов.</span></div>
<div class="line"><span class="keyword">enum</span> Item {</div>
<div class="line">    I_MERCURY = 0,</div>
<div class="line">    I_VENUS   = 1,</div>
<div class="line">    I_EMBARY  = 2,</div>
<div class="line">    I_MARS    = 3,</div>
<div class="line">    I_JUPITER = 4,</div>
<div class="line">    I_SATURN  = 5,</div>
<div class="line">    I_URANUS  = 6,</div>
<div class="line">    I_NEPTUNE = 7,</div>
<div class="line">    I_PLUTO   = 8,</div>
<div class="line">    I_MOON    = 9,</div>
<div class="line">    I_SUN     = 10,</div>
<div class="line">    I_EN      = 11,</div>
<div class="line">    I_LML     = 12,</div>
<div class="line">    I_LMAV    = 13,</div>
<div class="line">    I_TTMTDB  = 14</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>DevelopmentEphemeris</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">    <a id="a0" name="a0"></a><a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a7ba77317d0524237310fa39be81663bd">DevelopmentEphemeris</a>();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a7ba77317d0524237310fa39be81663bd">DevelopmentEphemeris</a>(<span class="keyword">const</span> std::string&amp; filePath);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a7ba77317d0524237310fa39be81663bd">DevelopmentEphemeris</a>(<span class="keyword">const</span> <a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a7ba77317d0524237310fa39be81663bd">DevelopmentEphemeris</a>&amp; other);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a7ba77317d0524237310fa39be81663bd">DevelopmentEphemeris</a>&amp; <a id="a1" name="a1"></a><a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a03fbb9da92c64c13d10ce0dee5280293">operator=</a>(<span class="keyword">const</span> <a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a7ba77317d0524237310fa39be81663bd">DevelopmentEphemeris</a>&amp; other);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> <a id="a2" name="a2"></a><a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a72e58f0d44158ec84747fd87612bc974">open</a>(<span class="keyword">const</span> std::string&amp; filePath);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> bodyPosition(<span class="keywordtype">int</span> target, <span class="keywordtype">int</span> center, <span class="keywordtype">double</span> jed, <span class="keywordtype">double</span> pos[3]) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> <a id="a3" name="a3"></a><a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a9315e17fa45812ac0d465d1efb687678">bodyState</a>(<span class="keywordtype">int</span> target, <span class="keywordtype">int</span> center, <span class="keywordtype">double</span> jed, <span class="keywordtype">double</span> state[6]) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> <a id="a4" name="a4"></a><a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a77da1cd381db4e473b919c0af161e7b1">item</a>(<span class="keywordtype">int</span> <a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a77da1cd381db4e473b919c0af161e7b1">item</a>, <span class="keywordtype">double</span> jed, <span class="keywordtype">double</span>* result) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> isOpen() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Первая доступная дата для рассчётов.</span></div>
<div class="line">    <span class="keywordtype">double</span> beginJed() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Последняя доступная дата для рассчётов.</span></div>
<div class="line">    <span class="keywordtype">double</span> endJed() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Номер выпуска.</span></div>
<div class="line">    <span class="keywordtype">int</span> index() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Строковая информация о выпуске.</span></div>
<div class="line">    std::string label() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Значение константы по её имени.</span></div>
<div class="line">    <span class="keywordtype">double</span> constant(<span class="keyword">const</span> std::string&amp; name, <span class="keywordtype">bool</span>* ok = <span class="keyword">nullptr</span>) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="comment">// Формат эфемерид.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> LABELS_COUNT = 3;      <span class="comment">// Строк в подписи.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> LABEL_SIZE = 84;       <span class="comment">// Символов в строке подписи.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> CNAME_SIZE = 6;        <span class="comment">// Символов в имени константы.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> CCOUNT_MAX_OLD = 400;  <span class="comment">// Кол-во констант (ст. формат).</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> CCOUNT_MAX_NEW = 1000; <span class="comment">// Кол-во констант (нов. формат).</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> MAX_POLY_SIZE = 15;    <span class="comment">// Макс. размер полиномов.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Работа с файлом</span></div>
<div class="line">    std::string m_filePath;        <span class="comment">// Путь к файлу эфемерид.</span></div>
<div class="line">    <span class="keyword">mutable</span> std::ifstream m_file;  <span class="comment">// Поток чтения файла.</span></div>
<div class="line">    <span class="keyword">mutable</span> std::vector&lt;double&gt; m_buffer; <span class="comment">// Буффер блока с коэффициентами.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Параметры эфемерид.</span></div>
<div class="line">    std::string m_label; <span class="comment">// Строковая информация о выпуске.</span></div>
<div class="line">    <span class="keywordtype">int</span> m_index;         <span class="comment">// Номерная часть индекса выпуска.</span></div>
<div class="line">    <span class="keywordtype">double</span> m_beginJed;   <span class="comment">// Дата начала выпуска (JED).</span></div>
<div class="line">    <span class="keywordtype">double</span> m_endJed;     <span class="comment">// Дата окончания выпуска (JED).</span></div>
<div class="line">    <span class="keywordtype">double</span> m_blockSpan;  <span class="comment">// Временная протяжённость блока.</span></div>
<div class="line">    <span class="keywordtype">int</span> m_keys[15][3];   <span class="comment">// Ключи поиска коэффициентов.</span></div>
<div class="line">    <span class="keywordtype">double</span> m_au;         <span class="comment">// Астрономическая единица (км).</span></div>
<div class="line">    <span class="keywordtype">double</span> m_emrat;      <span class="comment">// Отношение массы Земли к массе Луны.</span></div>
<div class="line">    <span class="keywordtype">int</span> m_ncoeff;        <span class="comment">// Количество коэффициентов в блоке.</span></div>
<div class="line"> </div>
<div class="line">    std::map&lt;std::string, double&gt; m_constants; <span class="comment">// Константы выпуска.</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Обрезать повторяющиеся пробелы (&#39; &#39;) с конца массива символов &quot;s&quot;</span></div>
<div class="line">    <span class="comment">// размера &quot;arraySize&quot;.</span></div>
<div class="line">    <span class="keyword">static</span> std::string cutBackSpaces(<span class="keyword">const</span> <span class="keywordtype">char</span>* s, <span class="keywordtype">size_t</span> size);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Приведение объекта к изначальному состоянию.</span></div>
<div class="line">    <span class="keywordtype">void</span> clear();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Копирование информации из объекта &quot;other&quot; в текущий объект.</span></div>
<div class="line">    <span class="keywordtype">void</span> copyHere(<span class="keyword">const</span> <a class="code hl_function" href="classdph_1_1_development_ephemeris.html#a7ba77317d0524237310fa39be81663bd">DevelopmentEphemeris</a>&amp; other);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Чтение файла.</span></div>
<div class="line">    <span class="keywordtype">bool</span> read();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Заполнение буффера &quot;m_buffer&quot; коэффициентами требуемого блока.</span></div>
<div class="line">    <span class="keywordtype">bool</span> fillBuffer(<span class="keywordtype">size_t</span> blockNum) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> body(<span class="keywordtype">int</span> resType, <span class="keywordtype">double</span> jed, <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> center,</div>
<div class="line">        <span class="keywordtype">double</span>* res) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Базовый элемент.</span></div>
<div class="line">    <span class="keywordtype">bool</span> baseItem(<span class="keywordtype">int</span> resType, <span class="keywordtype">double</span> jed, <span class="keywordtype">int</span> baseItem, <span class="keywordtype">double</span>* res) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Земля относительно барицентра Солнечной Системы.</span></div>
<div class="line">    <span class="keywordtype">bool</span> ssbaryEarth(<span class="keywordtype">int</span> resType, <span class="keywordtype">double</span> jed, <span class="keywordtype">double</span>* res) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Луна относительно барицентра Солнечной Системы.</span></div>
<div class="line">    <span class="keywordtype">bool</span> ssbaryMoon(<span class="keywordtype">int</span> resType, <span class="keywordtype">double</span> jed, <span class="keywordtype">double</span>* res) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">}; <span class="comment">// class EphemerisRelease</span></div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace dph</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">// DEPHEM_H</span></div>
<div class="ttc" id="aclassdph_1_1_development_ephemeris_html_a03fbb9da92c64c13d10ce0dee5280293"><div class="ttname"><a href="classdph_1_1_development_ephemeris.html#a03fbb9da92c64c13d10ce0dee5280293">dph::DevelopmentEphemeris::operator=</a></div><div class="ttdeci">DevelopmentEphemeris &amp; operator=(const DevelopmentEphemeris &amp;other)</div><div class="ttdoc">Оператор копирования.</div><div class="ttdef"><b>Definition:</b> dephem.cpp:20</div></div>
<div class="ttc" id="aclassdph_1_1_development_ephemeris_html_a72e58f0d44158ec84747fd87612bc974"><div class="ttname"><a href="classdph_1_1_development_ephemeris.html#a72e58f0d44158ec84747fd87612bc974">dph::DevelopmentEphemeris::open</a></div><div class="ttdeci">bool open(const std::string &amp;filePath)</div><div class="ttdoc">Открыть файл эфемерид.</div><div class="ttdef"><b>Definition:</b> dephem.cpp:27</div></div>
<div class="ttc" id="aclassdph_1_1_development_ephemeris_html_a77da1cd381db4e473b919c0af161e7b1"><div class="ttname"><a href="classdph_1_1_development_ephemeris.html#a77da1cd381db4e473b919c0af161e7b1">dph::DevelopmentEphemeris::item</a></div><div class="ttdeci">bool item(int item, double jed, double *result) const</div><div class="ttdoc">Значение отдельного элемент выпуска эфемерид.</div><div class="ttdef"><b>Definition:</b> dephem.cpp:62</div></div>
<div class="ttc" id="aclassdph_1_1_development_ephemeris_html_a7ba77317d0524237310fa39be81663bd"><div class="ttname"><a href="classdph_1_1_development_ephemeris.html#a7ba77317d0524237310fa39be81663bd">dph::DevelopmentEphemeris::DevelopmentEphemeris</a></div><div class="ttdeci">DevelopmentEphemeris()</div><div class="ttdoc">Конструктор по умолчанию.</div><div class="ttdef"><b>Definition:</b> dephem.cpp:5</div></div>
<div class="ttc" id="aclassdph_1_1_development_ephemeris_html_a9315e17fa45812ac0d465d1efb687678"><div class="ttname"><a href="classdph_1_1_development_ephemeris.html#a9315e17fa45812ac0d465d1efb687678">dph::DevelopmentEphemeris::bodyState</a></div><div class="ttdeci">bool bodyState(int target, int center, double jed, double state[6]) const</div><div class="ttdoc">Положение и скорость небесного тела.</div><div class="ttdef"><b>Definition:</b> dephem.cpp:55</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
