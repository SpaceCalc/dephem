\hypertarget{_c_1_2_users_2vetru_2_desktop_2dephem-sandbox_2dephem_2dephem_2dephem_8h-example}{}\doxysection{C\+:/\+Users/vetru/\+Desktop/dephem-\/sandbox/dephem/dephem/dephem.\+h}
Положение небесного тела.

Положение небесного тела.\+Положение {\ttfamily pos} (x, y, z, км) тела {\ttfamily target} относительно тела {\ttfamily center} на момент времени {\ttfamily jed}.

{\ttfamily jed} должен удовлетворять интервалу \mbox{[}begin\+Jed(), end\+Jed()\mbox{]}.

\begin{DoxyReturn}{Returns}
{\ttfamily true}, при успешном выполнении, иначе -\/ {\ttfamily false}\+:
\begin{DoxyItemize}
\item объект класса не инициализирован файлом эфемерид;
\item передан неверный индекс центрального или небесного тела;
\item передано неверное время {\ttfamily jed}.
\end{DoxyItemize}
\end{DoxyReturn}
int main() \{ return 0; \}

\begin{DoxyWarning}{Warning}

\begin{DoxyEnumerate}
\item метод не является потокобезопасным;
\item указатель {\ttfamily pos} не проверяется на {\ttfamily nullptr}.
\end{DoxyEnumerate}
\end{DoxyWarning}

\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#ifndef DEPHEM\_H}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define DEPHEM\_H}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define \_CRT\_SECURE\_NO\_WARNINGS}}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <fstream>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <cstring>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace }dph \{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// Индексы тел.}}
\DoxyCodeLine{\textcolor{keyword}{enum} Body}
\DoxyCodeLine{\{}
\DoxyCodeLine{    B\_MERCURY = 1,}
\DoxyCodeLine{    B\_VENUS   = 2,}
\DoxyCodeLine{    B\_EARTH   = 3,}
\DoxyCodeLine{    B\_MARS    = 4,}
\DoxyCodeLine{    B\_JUPITER = 5,}
\DoxyCodeLine{    B\_SATURN  = 6,}
\DoxyCodeLine{    B\_URANUS  = 7,}
\DoxyCodeLine{    B\_NEPTUNE = 8,}
\DoxyCodeLine{    B\_PLUTO   = 9,}
\DoxyCodeLine{    B\_MOON    = 10,}
\DoxyCodeLine{    B\_SUN     = 11,}
\DoxyCodeLine{    B\_SSBARY  = 12, \textcolor{comment}{// Барицентр Солнечной Системы.}}
\DoxyCodeLine{    B\_EMBARY  = 13  \textcolor{comment}{// Барицентр системы Земля-\/Луна.}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{// Индексы элементов.}}
\DoxyCodeLine{\textcolor{keyword}{enum} Item \{}
\DoxyCodeLine{    I\_MERCURY = 0,}
\DoxyCodeLine{    I\_VENUS   = 1,}
\DoxyCodeLine{    I\_EMBARY  = 2,}
\DoxyCodeLine{    I\_MARS    = 3,}
\DoxyCodeLine{    I\_JUPITER = 4,}
\DoxyCodeLine{    I\_SATURN  = 5,}
\DoxyCodeLine{    I\_URANUS  = 6,}
\DoxyCodeLine{    I\_NEPTUNE = 7,}
\DoxyCodeLine{    I\_PLUTO   = 8,}
\DoxyCodeLine{    I\_MOON    = 9,}
\DoxyCodeLine{    I\_SUN     = 10,}
\DoxyCodeLine{    I\_EN      = 11,}
\DoxyCodeLine{    I\_LML     = 12,}
\DoxyCodeLine{    I\_LMAV    = 13,}
\DoxyCodeLine{    I\_TTMTDB  = 14}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class }DevelopmentEphemeris}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classdph_1_1_development_ephemeris_a7ba77317d0524237310fa39be81663bd}{DevelopmentEphemeris}}();}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classdph_1_1_development_ephemeris_a7ba77317d0524237310fa39be81663bd}{DevelopmentEphemeris}}(\textcolor{keyword}{const} std::string\& filePath);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classdph_1_1_development_ephemeris_a7ba77317d0524237310fa39be81663bd}{DevelopmentEphemeris}}(\textcolor{keyword}{const} \mbox{\hyperlink{classdph_1_1_development_ephemeris_a7ba77317d0524237310fa39be81663bd}{DevelopmentEphemeris}}\& other);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classdph_1_1_development_ephemeris_a7ba77317d0524237310fa39be81663bd}{DevelopmentEphemeris}}\& \mbox{\hyperlink{classdph_1_1_development_ephemeris_a03fbb9da92c64c13d10ce0dee5280293}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{classdph_1_1_development_ephemeris_a7ba77317d0524237310fa39be81663bd}{DevelopmentEphemeris}}\& other);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} \mbox{\hyperlink{classdph_1_1_development_ephemeris_a72e58f0d44158ec84747fd87612bc974}{open}}(\textcolor{keyword}{const} std::string\& filePath);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} bodyPosition(\textcolor{keywordtype}{int} target, \textcolor{keywordtype}{int} center, \textcolor{keywordtype}{double} jed, \textcolor{keywordtype}{double} pos[3]) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} \mbox{\hyperlink{classdph_1_1_development_ephemeris_a9315e17fa45812ac0d465d1efb687678}{bodyState}}(\textcolor{keywordtype}{int} target, \textcolor{keywordtype}{int} center, \textcolor{keywordtype}{double} jed, \textcolor{keywordtype}{double} state[6]) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} \mbox{\hyperlink{classdph_1_1_development_ephemeris_a77da1cd381db4e473b919c0af161e7b1}{item}}(\textcolor{keywordtype}{int} \mbox{\hyperlink{classdph_1_1_development_ephemeris_a77da1cd381db4e473b919c0af161e7b1}{item}}, \textcolor{keywordtype}{double} jed, \textcolor{keywordtype}{double}* result) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} isOpen() \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Первая доступная дата для рассчётов.}}
\DoxyCodeLine{    \textcolor{keywordtype}{double} beginJed() \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Последняя доступная дата для рассчётов.}}
\DoxyCodeLine{    \textcolor{keywordtype}{double} endJed() \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Номер выпуска.}}
\DoxyCodeLine{    \textcolor{keywordtype}{int} index() \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Строковая информация о выпуске.}}
\DoxyCodeLine{    std::string label() \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Значение константы по её имени.}}
\DoxyCodeLine{    \textcolor{keywordtype}{double} constant(\textcolor{keyword}{const} std::string\& name, \textcolor{keywordtype}{bool}* ok = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{private}:}
\DoxyCodeLine{    \textcolor{comment}{// Формат эфемерид.}}
\DoxyCodeLine{    \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} LABELS\_COUNT = 3;      \textcolor{comment}{// Строк в подписи.}}
\DoxyCodeLine{    \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} LABEL\_SIZE = 84;       \textcolor{comment}{// Символов в строке подписи.}}
\DoxyCodeLine{    \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} CNAME\_SIZE = 6;        \textcolor{comment}{// Символов в имени константы.}}
\DoxyCodeLine{    \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} CCOUNT\_MAX\_OLD = 400;  \textcolor{comment}{// Кол-\/во констант (ст. формат).}}
\DoxyCodeLine{    \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} CCOUNT\_MAX\_NEW = 1000; \textcolor{comment}{// Кол-\/во констант (нов. формат).}}
\DoxyCodeLine{    \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} MAX\_POLY\_SIZE = 15;    \textcolor{comment}{// Макс. размер полиномов.}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Работа с файлом}}
\DoxyCodeLine{    std::string m\_filePath;        \textcolor{comment}{// Путь к файлу эфемерид.}}
\DoxyCodeLine{    \textcolor{keyword}{mutable} std::ifstream m\_file;  \textcolor{comment}{// Поток чтения файла.}}
\DoxyCodeLine{    \textcolor{keyword}{mutable} std::vector<double> m\_buffer; \textcolor{comment}{// Буффер блока с коэффициентами.}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Параметры эфемерид.}}
\DoxyCodeLine{    std::string m\_label; \textcolor{comment}{// Строковая информация о выпуске.}}
\DoxyCodeLine{    \textcolor{keywordtype}{int} m\_index;         \textcolor{comment}{// Номерная часть индекса выпуска.}}
\DoxyCodeLine{    \textcolor{keywordtype}{double} m\_beginJed;   \textcolor{comment}{// Дата начала выпуска (JED).}}
\DoxyCodeLine{    \textcolor{keywordtype}{double} m\_endJed;     \textcolor{comment}{// Дата окончания выпуска (JED).}}
\DoxyCodeLine{    \textcolor{keywordtype}{double} m\_blockSpan;  \textcolor{comment}{// Временная протяжённость блока.}}
\DoxyCodeLine{    \textcolor{keywordtype}{int} m\_keys[15][3];   \textcolor{comment}{// Ключи поиска коэффициентов.}}
\DoxyCodeLine{    \textcolor{keywordtype}{double} m\_au;         \textcolor{comment}{// Астрономическая единица (км).}}
\DoxyCodeLine{    \textcolor{keywordtype}{double} m\_emrat;      \textcolor{comment}{// Отношение массы Земли к массе Луны.}}
\DoxyCodeLine{    \textcolor{keywordtype}{int} m\_ncoeff;        \textcolor{comment}{// Количество коэффициентов в блоке.}}
\DoxyCodeLine{}
\DoxyCodeLine{    std::map<std::string, double> m\_constants; \textcolor{comment}{// Константы выпуска.}}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Обрезать повторяющиеся пробелы (' ') с конца массива символов "{}s"{}}}
\DoxyCodeLine{    \textcolor{comment}{// размера "{}arraySize"{}.}}
\DoxyCodeLine{    \textcolor{keyword}{static} std::string cutBackSpaces(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* s, \textcolor{keywordtype}{size\_t} size);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Приведение объекта к изначальному состоянию.}}
\DoxyCodeLine{    \textcolor{keywordtype}{void} clear();}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Копирование информации из объекта "{}other"{} в текущий объект.}}
\DoxyCodeLine{    \textcolor{keywordtype}{void} copyHere(\textcolor{keyword}{const} \mbox{\hyperlink{classdph_1_1_development_ephemeris_a7ba77317d0524237310fa39be81663bd}{DevelopmentEphemeris}}\& other);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Чтение файла.}}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} read();}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Заполнение буффера "{}m\_buffer"{} коэффициентами требуемого блока.}}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} fillBuffer(\textcolor{keywordtype}{size\_t} blockNum) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} body(\textcolor{keywordtype}{int} resType, \textcolor{keywordtype}{double} jed, \textcolor{keywordtype}{int} target, \textcolor{keywordtype}{int} center,}
\DoxyCodeLine{        \textcolor{keywordtype}{double}* res) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Базовый элемент.}}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} baseItem(\textcolor{keywordtype}{int} resType, \textcolor{keywordtype}{double} jed, \textcolor{keywordtype}{int} baseItem, \textcolor{keywordtype}{double}* res) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Земля относительно барицентра Солнечной Системы.}}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} ssbaryEarth(\textcolor{keywordtype}{int} resType, \textcolor{keywordtype}{double} jed, \textcolor{keywordtype}{double}* res) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Луна относительно барицентра Солнечной Системы.}}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} ssbaryMoon(\textcolor{keywordtype}{int} resType, \textcolor{keywordtype}{double} jed, \textcolor{keywordtype}{double}* res) \textcolor{keyword}{const};}
\DoxyCodeLine{}
\DoxyCodeLine{\}; \textcolor{comment}{// class EphemerisRelease}}
\DoxyCodeLine{}
\DoxyCodeLine{\} \textcolor{comment}{// namespace dph}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif }\textcolor{comment}{// DEPHEM\_H}}

\end{DoxyCodeInclude}
 